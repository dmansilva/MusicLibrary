package server;

import java.io.IOException;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;
import javax.xml.crypto.Data;

public class LoginServlet extends BaseServlet {
	
	
	
	public void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		
		Data data = (Data) getServletConfig().getServletContext().getAttribute(DATA);
		HttpSession session = request.getSession();
		
		String header =	"<html" + 
							"<head><title>Song Finder</title></head>" + 
							"<h1><center> Song Finder</center></h1>" +
							"<hr>" +
							"<body>" +
							"<center> Welcome to Song Finder! Search for an artist, song title, or tag and we will give you a list of similar songs you might like. Enjoy!</center><br/>" +
							"<form action=\"search\" method=\"post\">" +
							"<center> Login </center><br/>" + 
							"<center> Username: "  +
							"<input type=\"text\" name=\"username\"><br/>" +
							"<center> Password: "  +
							"<input type=\"text\" name=\"password\"><br/>" +
							"</form>" +
							"<hr>" +
							"<hr>" +
							"<hr>" +
							"<form action=\"newUser\" method=\"get\">" +
							"<input type=\"submit\" value=\"Create an Account\"><br/>" +
							"</form>" +
							"</body>" +
							"</html>";
		
		//if user is logged in, redirect
	 	if(session.getAttribute(NAME) != null) {
			response.sendRedirect(response.encodeRedirectURL("/list"));
			return;
		}
		
	 	String status = getParameterValue(request, STATUS);
		
		boolean statusok = status != null && status.equals(ERROR)?false:true;
		boolean redirected = status != null && status.equals(NOT_LOGGED_IN)?true:false;
		
		
	}
	
	/*
	 * doPost will take care of verifying the user's login input from the doGet. 
	 * It will call a method call ValidateUser in order to get and validate the
	 * information about already existing user's information from the relational database.
	 * (non-Javadoc)
	 * @see javax.servlet.http.HttpServlet#doPost(javax.servlet.http.HttpServletRequest, javax.servlet.http.HttpServletResponse)
	 */
	
	public void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		
	}

}
